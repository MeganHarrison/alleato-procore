# TASKS: [PROJECT NAME]

**Project ID:** INI-YYYY-MM-DD-###
**Status:** In Progress
**Last Verified:** Never
**Owner Agent:** [agent-type]

---

## Quick Status

| Metric | Value |
|--------|-------|
| Total Tasks | 0 |
| Completed | 0 |
| In Progress | 0 |
| Blocked | 0 |
| Gates Passed | 0/0 |

---

## Phase 1: Database & Schema

### 1.1 Migration
- [ ] Create migration file: `supabase/migrations/YYYYMMDDHHMMSS_create_[table].sql`
- [ ] Define table structure
- [ ] Add foreign key relationships
- [ ] Apply migration: `npx supabase db push`

**GATE: Migration**
```bash
npx supabase db push
# Expected: Migration applied successfully
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

### 1.2 RLS Policies
- [ ] Create read policy
- [ ] Create insert policy
- [ ] Create update policy
- [ ] Create delete policy

### 1.3 TypeScript Types
- [ ] Generate types: `npx supabase gen types typescript --project-id "lgveqfnpkxvzbnnwuled" --schema public > frontend/src/types/database.types.ts`
- [ ] Verify types include new tables

**GATE: Type Generation**
```bash
npm run typecheck --prefix frontend
# Expected: No type errors
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

---

## Phase 2: API Endpoints

### 2.1 List Endpoint
- [ ] Create route: `frontend/src/app/api/[resource]/route.ts`
- [ ] Implement GET handler with pagination
- [ ] Add filtering support
- [ ] Test manually via curl/Postman

### 2.2 Detail Endpoint
- [ ] Create route: `frontend/src/app/api/[resource]/[id]/route.ts`
- [ ] Implement GET handler
- [ ] Handle not found case

### 2.3 Create Endpoint
- [ ] Implement POST handler
- [ ] Add validation
- [ ] Handle errors gracefully

### 2.4 Update Endpoint
- [ ] Implement PUT/PATCH handler
- [ ] Add validation
- [ ] Verify ownership/permissions

### 2.5 Delete Endpoint
- [ ] Implement DELETE handler
- [ ] Add soft delete if required
- [ ] Handle cascade rules

**GATE: API Tests**
```bash
npx playwright test frontend/tests/e2e/[project]-api.spec.ts
# Expected: All API tests pass
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

---

## Phase 3: Frontend - List View

### 3.1 Page Setup
- [ ] Create page: `frontend/src/app/[projectId]/[resource]/page.tsx`
- [ ] Add to navigation/sidebar
- [ ] Implement breadcrumbs

### 3.2 Data Table
- [ ] Fetch data with loading state
- [ ] Display in table with columns
- [ ] Add sorting
- [ ] Add filtering
- [ ] Add pagination

### 3.3 Actions
- [ ] Add "New" button
- [ ] Add row actions (edit, delete)
- [ ] Add bulk actions if needed

**GATE: List View Loads**
```bash
npx playwright test --grep "[resource] list"
# Expected: Page loads, data displays, no console errors
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

---

## Phase 4: Frontend - Forms

### 4.1 Create Form
- [ ] Create form component
- [ ] Add all required fields
- [ ] Implement validation
- [ ] Connect to POST endpoint
- [ ] Handle success/error states

### 4.2 Edit Form
- [ ] Reuse create form or create separate
- [ ] Pre-populate with existing data
- [ ] Connect to PUT endpoint
- [ ] Handle success/error states

### 4.3 Delete Confirmation
- [ ] Create confirmation dialog
- [ ] Connect to DELETE endpoint
- [ ] Handle success/error states

**GATE: Form Tests**
```bash
npm run test:forms --prefix frontend -- --grep "[resource]"
# Expected: All form tests pass
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

---

## Phase 5: Integration

### 5.1 Related Modules
- [ ] Link to budget module (if applicable)
- [ ] Link to contracts module (if applicable)
- [ ] Link to change orders (if applicable)

### 5.2 Notifications
- [ ] Add email notifications (if required)
- [ ] Add in-app notifications (if required)

### 5.3 Audit Trail
- [ ] Log create actions
- [ ] Log update actions
- [ ] Log delete actions

---

## Phase 6: Testing & Verification

### 6.1 E2E Test Suite
- [ ] Create test file: `frontend/tests/e2e/[resource].spec.ts`
- [ ] Test: List view loads
- [ ] Test: Create new record
- [ ] Test: Edit existing record
- [ ] Test: Delete record
- [ ] Test: Validation errors display
- [ ] Test: Permissions enforced

### 6.2 Visual Verification
- [ ] Compare list view to Procore screenshot
- [ ] Compare form to Procore screenshot
- [ ] Verify responsive design

**GATE: Full E2E Suite**
```bash
npx playwright test frontend/tests/e2e/[resource].spec.ts
# Expected: All tests pass
```
- Gate Status: [ ] PASSED  [ ] FAILED  [ ] NOT RUN
- Last Run:
- Evidence:

---

## Verification Summary

| Gate | Command | Status | Last Run | Output |
|------|---------|--------|----------|--------|
| TypeScript | `npm run typecheck` | | | |
| ESLint | `npm run lint` | | | |
| Migration | `npx supabase db push` | | | |
| Unit Tests | `npm run test:unit` | | | |
| API Tests | `playwright --grep api` | | | |
| Form Tests | `npm run test:forms` | | | |
| Full E2E | `playwright [resource].spec.ts` | | | |
| Visual Match | Manual comparison | | | |

---

## Blockers

| Issue | Impact | Waiting On | Created |
|-------|--------|------------|---------|
| | | | |

---

## Session Log

| Date | Agent | Duration | Tasks Done | Tests Run | Verified | Notes |
|------|-------|----------|------------|-----------|----------|-------|
| | | | | | | |

---

## Resources

- **Crawl Data:** `./crawl/`
- **Procore Reference:** `./crawl/screenshots/`
- **Specification:** `./specs/`
- **Test Results:** `./test-results/`

---

## Handoff Notes

*Write here what the next session needs to know*

### Current State
-

### Next Steps
1.
2.
3.

### Known Issues
-

### Questions for User
-
